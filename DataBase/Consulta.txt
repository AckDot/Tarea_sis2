import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import java.sql.SQLException;
import javax.swing.JOptionPane;

/**
 * DatabaseConexion
 */
public class DatabaseConnection {

    
    private Connection con;

    public DatabaseConnection() {
        try {
            con = DriverManager.getConnection(
                    "jdbc:mysql://us-east.connect.psdb.cloud/recipes?sslMode=VERIFY_IDENTITY",
                    "s674h3cmydc5zb924t4a",
                    "pscale_pw_QRqZc5Y2Yfaj8606oXXw6gulUjpvQk1nryWxOlwQXo");
            System.out.print("conected");
        } catch (SQLException e) {
            System.out.print("error");
        }
    }

    public void insertRecipe(Recipe r){
        String sql = "insert into recipes(name_recipe, ingredients, score) values ('"
                       +r.getNameRecipe()+"','"
                       +r.getIngredients()+"','"
                       +r.getScore()+"')";
        try{
            Statement sentencia =  con.createStatement();
            sentencia.executeUpdate(sql);
            sentencia.close() ;
            JOptionPane.showMessageDialog(null, "Guardado Correctamente");
        }catch(SQLException e){
             JOptionPane.showMessageDialog(null,e);
        }
    }

    public static void main(String[] args) {
        DatabaseConnection db = new DatabaseConnection();
        Recipe r = new Recipe("pique", "1. papas \n 2. chorizo \n 3. carne", 4);
        db.insertRecipe(r);
    }
}